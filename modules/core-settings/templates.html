<!DOCTYPE html>

<template id="settings">
    <render render="core-settings/onload" style="display:none"></render>
    <div class="settings" style="max-height: 90vh; overflow: auto;">
        <h2>Settings</h2>

        <details open>
            <summary><h3 style="display:inline-block">General Settings</h3></summary>

            <fieldset>
                <h4>Grid Size</h4>
                <label for="setting-gridx">Grid Size: </label>
                <input type="number" id="setting-gridx" onchange="setConfigEntry('gridX', this.value)"><label> px</label>
                <br>
            </fieldset>

            <fieldset>
                <h4>TPS</h4>
                <input type="number" id="setting-tps" min="1" max="240" onchange="setConfigEntry('tps', this.value)">
            </fieldset>
            
            <fieldset>
                <h4>Background</h4>
                <input type="file" accept="image/*" onchange="setBackgroundImage(this)" id="setting-background">
            </fieldset>

            <fieldset>
                <h4>Theme color</h4>
                <input type="color" id="setting-themecolor" onchange="setConfigEntry('themecolor', this.value); document.documentElement.style.setProperty('--themecolor', this.value)">
            </fieldset>

            <!-- <fieldset>
                <h4>Debug Mode</h4>
                <label for="setting-debug">Enabled: </label>
                <input type="checkbox" id="setting-debug">
            </fieldset> -->

            <fieldset>
                <h4>Allow internal Blocks creation</h4>
                <label for="setting-internalblocks">Enabled: </label>
                <input type="checkbox" id="setting-internalblocks" onchange="setConfigEntry('allowinternalblockscreation', !getConfigEntry('allowinternalblockscreation'))">
            </fieldset>


            <fieldset>
                <h4>Darkmode</h4>
                <input type="radio" value="auto" name="setting-radio-darkmode" id="setting-darkmode-auto">
                <label for="setting-darkmode-auto">Auto</label>
                
                <input type="radio" value="light" name="setting-radio-darkmode" id="setting-darkmode-light">
                <label for="setting-darkmode-light">Light</label>

                <input type="radio" value="dark" name="setting-radio-darkmode" id="setting-darkmode-dark">
                <label for="setting-darkmode-dark">Dark</label>
            </fieldset>

            <fieldset>
                <h4>Reset</h4>
                <render render="core-edit/reset-button"></render>
            </fieldset>
        </details>


        <details open>
            <summary><h3 style="display:inline-block">Modules</h3></summary>
            <fieldset id="setting-fieldset_modules">
                <div style="display:inline-flex;">

                    <div style="float: left;">
                        <h4>Disabled</h4>

                        <form action="" onsubmit="settings_enDisModule(this.children[0].value, 'disable')" style="width:100%; display:flex;">
                            <input type="text">
                            <input type="submit" value="+" style="width:.9rem">
                        </form>

                        <form action="" onsubmit="settings_enDisModule(this.children[0].selectedOptions[0].value, 'enable')">
                            <select size="5" id="setting-disabled_modules">
                            </select>
                            <div style="display:flex; float: right;">
                                <input type="submit" value="➕">
                                <input type="button" value="🗑️" onclick="settings_enDisModule(this.parentElement.parentElement.children[0].selectedOptions[0].value, 'delete')">
                            </div>
                        </form>
                    </div>

                    <div style="margin: .5rem"></div>

                    <div style="float: right;">
                        <h4>Enabled</h4>
                            <form action="" onsubmit="settings_enDisModule(this.children[0].value, 'enable')" style="width:100%; display:flex;">
                            <input type="text">
                            <input type="submit" value="+" style="width:.9rem">
                        </form>

                        <form action="" onsubmit="settings_enDisModule(this.children[0].selectedOptions[0].value, 'disable')">
                            <select size="5" id="setting-enabled_modules">
                                <option>none</option>
                            </select>
                            <div style="display:flex; float:left">
                                <input type="submit" value="➖">
                                <input type="button" value="🗑️" onclick="settings_enDisModule(this.parentElement.parentElement.children[0].selectedOptions[0].value, 'delete')">
                            </div>
                        </form>
                    </div>
                </div>
            </fieldset>
        </details>

        <style>
            #setting-fieldset_modules select,
            #setting-fieldset_modules option,
            #setting-fieldset_modules input {
                display: block;
                width: 100%;
                box-sizing: border-box;
            }
        </style>
    </div>
</template>

<template id="onload" internal>
    <img src="/img/transparent.png" onload="updateSettings()" alt="" tabindex="-1">
</template>